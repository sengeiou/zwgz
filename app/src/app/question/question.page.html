<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)='back()'>
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>问题</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="question!=null">
    <div class="padding-20 ">
      <div class="bg-white padding-20 radius-10">
        <div class="txt-blod">{{question.title}}</div>
        <div class="h6 margin-top">{{question.title}}</div>
        <div class="margin-top">
          <div class="flex-row flex-center">
            <div class="margin-right">
              <img [src]="question.member_avatarUrl" class="icon-20 radius-50" />
            </div>
            <div class="txt-gray h6" style="width:100px;">
              {{question.member_nickName}}
            </div>
            <div class="txt-gray h6 flex-1">
              {{question.post_time_str}}
            </div>
            <div>
                <img src="{{uploadpath}}resource/{{res.gongxian}}" class="icon-20 " />
            </div>
            <div class="txt-gray h6 margin-left"  >{{question.replycount}}</div>
            <div class="margin-left" (click)="fav()">
                <img src="{{uploadpath}}resource/{{res.ba}}" class="icon-20" *ngIf="question.isfav=='N'" />
                <img src="{{uploadpath}}resource/{{res.baed}}" class="icon-20" *ngIf="question.isfav=='Y'" />
            </div>
            <div class="txt-gray h6 margin-left" >{{question.favcount}}</div>
          </div>
        </div>
        <div>
          <div class="margin-top" *ngIf="question.hotreply.length>0">
            <div class="flex-row flex-center ">
              <div class="tabset bg-primary"></div>
              <div class="margin-left h5 txt-gray">强力贡献者</div>
            </div>
            <div class="margin-top flex-row flex-center">
              <div *ngFor="let hotmember of question.hotreply" class="margin-right">
                <img [src]='hotmember.avatarUrl' class="icon-40 radius-50" />
              </div>
            </div>
          </div>
          <div>
            <div class="margin-top">
              <div class="flex-row flex-center ">
                <div class="tabset bg-primary"></div>
                <div class="margin-left h5 txt-gray flex-1">内容详情</div>
                <div>
                  <img src="{{uploadpath}}resource/{{res.comment}}" class="icon-10" />
                </div>
                <div class="margin-left h6 txt-gray " (click)="navigate('question-reply',{question_id:question.id})">
                  我也贡献</div>
              </div>
              <div>
                <div *ngFor="let reply of question.latestreply " class="margin-top flex-row ">
                  <div class="margin-right-20">
                    <img [src]='reply.member_avatarUrl' class="icon-40 radius-50" />
                  </div>
                  <div class="flex-1">
                    <div class="flex-row flex-center">
                      <div class="flex-1">
                        <div class="h5 txt-gray">{{reply.member_nickName}}</div>
                        <div class="txt-gray h6">{{reply.guzhi==""?"暂无估值":"估值结果"+reply.guzhi+"亿元"}}</div>
                      </div>
                      <div style="padding-right:10px;" (click)='like(reply)'>
                        <img src="{{uploadpath}}resource/{{res.up}}" *ngIf="reply.islike=='N'" class="icon-20" />
                        <img src="{{uploadpath}}resource/{{res.upa}}" *ngIf="reply.islike!='N'" class="icon-20" />
                      </div>
                      <div style="padding-right:10px;" [class.txt-red]="reply.islike!='N'" (click)='like(reply)'>
                        {{reply.likecount}}
                      </div>
                    </div>
                    <div class="h5 margin-top-5"
                      (click)="navigate('question-reply',{question_id:question.id,questionreply_id:reply.id,atmember_id:0})">
                      {{reply.replycontent}}</div>
                    <div class="margin-top txt-gray h6">{{reply.reply_time.substr(0,16)}}</div>
                    <div class="margin-top txt-primary h6 text-right"
                      (click)="navigate('question-reply',{question_id:question.id,questionreply_id:reply.id,atmember_id:0})">
                      回复</div>
                    <div *ngIf="reply.replyreply.length>0">
                      <div class="padding-20 ">
                        <div class="flex-row margin-bottom" *ngFor="let rr of reply.replyreply">
                          <div class="margin-right">
                            <img [src]="rr.member_avatarUrl" class="icon-30 radius-50" />
                          </div>
                          <div class="margin-left flex-1">
                            <div class="flex-row flex-center">
                                <div class="flex-1">
                                  <div class="h6 txt-gray">{{rr.member_nickName}}</div>
                                </div>
                                <div style="padding-right:10px;" (click)='like(rr)'>
                                    <img src="{{uploadpath}}resource/{{res.up}}" *ngIf="rr.islike=='N'" class="icon-30" />
                                    <img src="{{uploadpath}}resource/{{res.upa}}" *ngIf="rr.islike!='N'" class="icon-30" />
                                </div>
                                <div style="padding-right:10px;" [class.txt-red]="rr.islike!='N'" (click)='like(rr)'>
                                    {{rr.likecount}}
                                </div>
                              </div>
                            <div class="h5 margin-top" (click)="navigate('question-reply',{question_id:question.id,questionreply_id:reply.id,atmember_id:0,rep:rr.replycontent})">
                              <span *ngIf="rr.atmember_id>0">回复</span>
                              <span *ngIf="rr.atmember_id>0" class="txt-primary">@{{rr.atmember_nickName}}</span>
                              <span *ngIf="rr.atmember_id>0">：</span>
                              {{rr.replycontent}}</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="question.latestreply.length==0">
          <div class="flex-row flex-center margin-top">
            <div class="flex-1"></div>
            <div (click)="navigate('question-reply',{question_id:question.id})">
              <img src="{{uploadpath}}resource/{{res.comment}}" class="icon-10" />
            </div>
            <div class="margin-left h6 txt-primary " (click)="navigate('question-reply',{question_id:question.id})">
              我先来贡献</div>
            <div class="flex-1"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>